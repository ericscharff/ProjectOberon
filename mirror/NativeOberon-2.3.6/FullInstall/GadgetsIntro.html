<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML Level 2.0 2//EN">
<!-- Generated by Text2HTMLGIF (afi, ejz)-->
<HTML>
<HEAD>
<META NAME="Author" CONTENT="Andre Fischer">
<TITLE>Introduction to Gadgets</TITLE>
</HEAD>
<BODY><H1><CENTER>Introduction to Gadgets</CENTER></H1><HR>
<CENTER><B>[ Text | <A HREF="GadgetsIntro.Contents.html">Contents</A> | <A HREF="GadgetsIntro.Index.html">Index</A> | <A HREF="Big.Index.html">Master index</A>]</B></CENTER><BR>
<BR>
<H1>
<A NAME="0"></A>Tutorial objective</H1>
Introduce you to the Oberon System 3 graphical user interface (GUI) named Gadgets. The notions of visual and model gadgets are presented. Then gadgets such as panels, documents and desktops are described.
<P>Estimated time: 60 minutes.
<P><HR>
<H1>
<A NAME="Intro"></A>Introduction</H1>
Gadgets is a 
<A NAME="1"></A>graphical user interface management system for <I>Oberon</I> <I>System 3.</I> It consists of a set of 
<A NAME="2"></A>end-user objects for building graphical user interfaces. This construction process is done at run-time, hence end-user objects. These end-user objects are called 
<A NAME="3"></A>gadgets. Gadgets range from typical dialog elements like <A HREF="#Button">buttons</A> and <A HREF="#Checkbox">check boxes</A>, to more complicated ones like <A HREF="GadgetsUse.html#TextGadget">text</A> and drawing editors. Not only do you have the possibility of using applications that have been built with the Gadgets system, but you can also build your own graphical user interfaces from the provided parts. Also, should the provided gadgets not fulfill your needs, you may program your own, either by extending existing ones, or by building completely new ones. You may also <I>borrow</I> parts from other applications.
<P>Technically, a gadget is a user interface component of varying granularity. For example, a line or a figure in a drawing is a gadget, just as the drawing itself is a (composite) gadget. Later on, we shall introduce the term <I>container gadget</I> to express this. Each gadget knows a well-defined communication protocol that allows it to act as an independent functional unit with a life of its own, and it can be integrated into any environment that provides the communication protocol to it. Gadgets can flow along in text, they may be integrated into <A HREF="#Panel">panels</A> (somewhat equivalent to windows in other systems) or be used in a page layout system. As they are active objects, their editors are built-in, allowing them to be edited or used where they appear. Each gadget instance behaves in its own special way. However, all of them follow a set of guidelines that are already well-known to Oberon users. Most important, they respond to certain <A HREF="#Mouse">mouse clicks</A> and to <A HREF="Mouse.html#Keyboard">keyboard input</A>.
<P>
<H2>
<A NAME="4"></A>Gadgets classes</H2>
There are several gadget classes in the Oberon System 3. The gadget class determines what role the gadget plays in the system, its appearance and its behaviour. We shall now review of a few of them, starting with some of the more interesting visual gadgets, followed by the somewhat more abstract <A HREF="#ModelGadget">model gadgets</A>. The entire collection of gadgets provided with this Oberon System 3 delivery is reviewed in <A HREF="GadgetsUse.html#">Using Gadgets</A>. Other important gadgets such as panels, documents and desktops are introduced in later chapters.
<P><HR>
<H1>
<A NAME="VisualGadget"></A>Visual gadgets</H1>
A visual gadget is represented on your screen by a graphical symbol, most often with a 3-dimensional look (see the button below), which serves as communication agent between you and your computer. In addition, such an agent will demonstrate a simple behaviour when solicited by mouse clicks. Oberon introduces a new way to interact with your computer.
<P>
<H2>
<A NAME="Button"></A>Button</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro1.gif" OBJECT="GadgetsIntroObjs.0"> A button can be pressed and released by clicking the middle mouse key on it. Try it now.
<BR>The button is pressed, displays a rectangular red mark simulating an LED and pops back to its original state when the key is released. Clicking on the button causes the execution of an Oberon command, if so defined. The caption should (preferably) denote the button's function or action.
<P>Alternatively, a button can be defined as a toggling button with two states. In that case the button must be clicked twice for cycling through the two states.&nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro2.gif" OBJECT="GadgetsIntroObjs.1">
<P>
<H2>
<A NAME="Checkbox"></A>Check box</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro3.gif" OBJECT="GadgetsIntroObjs.2">&nbsp; &nbsp; A check box is very similar to a toggling button but it has no caption and the two states are identified by the presence or the absence of a check mark. Try that with a middle mouse key click. Clicking on the check box causes the execution of an Oberon command, if so defined.
<P>
<H2>
<A NAME="Slider"></A>Slider</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro4.gif" OBJECT="GadgetsIntroObjs.3">
<P>A slider is used to set a (hidden) numerical value depending on the relative position of the knob which is positioned by dragging on the middle mouse key.
<BR>The minimum and the maximum values are part of the slider's specification (also hidden).
<P>When the slider is manipulated an Oberon command is executed, if so defined.
<P>
<H2>
<A NAME="List"></A>List</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro5.gif" OBJECT="GadgetsIntroObjs.4">
<P>A list displays a set of strings in alphabetical order without duplicate, as is the case here. Alternatively, the list may be left unsorted in which case duplicate entries are allowed. The control and the behaviour of a list is not so simple anymore compared to that of a button or a check box.
<P>Clicking the <B>left</B> key anywhere in the list focuses the list: a vertical line appears at the left margin. When focused, quick positioning in a longer sorted list is achieved by typing a few initial characters. The list is scrolled to the effect that the list item with matching initial characters is positioned on the first line. Hitting the return key clears the typed word.
<BR>Also when focused, a selected text may be copied into the list with a right and middle key <A HREF="Mouse.html#Interclick">interclick</A>. In a sorted list, new items are inserted in alphabetical order and are unique. In an unsorted list, new items are inserted at the end of the list.
<P>Clicking the <B>right</B> key on a list item selects it. Clicking again on the selected item deselects it. Dragging on the right key upward or downward extends the selection to several consecutive items. The list will automatically scroll forward or backward if need be. Clicking on a non-selected item starts a new selection. Scrolling may also be controlled with the scroll bar, if present.
<P>Clicking the <B>middle</B> mouse key on a list item causes the execution of an Oberon command, if so defined.
<P>
<H2>
<A NAME="Textfield"></A>Text field</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro6.gif" OBJECT="GadgetsIntroObjs.5">
<P>A text field allows the editing of a single line of text. The focus point is set with a left key click. The text field enters then a local editing mode and full swung Oberon text editing capabilities are available. As soon as the cursor is removed (e.g. when pressing the Esc key) or the Return key is pressed, this local editing mode is left. This is made visible by the changing 3D aspect of the field.
<P>Pressing the Return key causes the execution of an Oberon command, if so defined.
<P><HR>
<H1>
<A NAME="Mouse"></A>Controlling gadgets with the mouse</H1>
One of the interesting and novel aspects of gadgets is that they can be changed in size and position, in addition to being used, from creation onwards until they are eventually explicitly locked by the user. This is in contrast to other systems where the user receives his user interface locked, and must "take it or leave it". A significant part of a Gadgets system user's time is spent organizing and building new user interfaces. In this section we explain how interactive composition of gadgets is done at run-time.
<P>
<H2>
<A NAME="MouseKey"></A>Basic mouse key actions</H2>
<A HREF="#VisualGadget">Visual gadgets</A> are, with a few exceptions, <I>rectangular</I> in shape. The rectangular area that a gadget occupies can be conceptually divided into a <I>control area</I>, a few pixels wide on the inside border, and an <I>active area</I>. The width of the control area varies according the the size and the state of the gadget.
<P>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro7.gif" OBJECT="GadgetsIntroObjs.6">
<P>When the <A HREF="Mouse.html#Mouse">mouse focus</A> is located in one or the other of these areas, the gadget responds to mouse events differently.
<P>In the 
<A NAME="5"></A>active area, the gadget normally adheres to the Oberon conventions or stays close to them; that is, if you already have a good practice of controlling text with the mouse, you will immediately recognize the similarities so that controlling gadgets will soon be a child's play.
<P><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro8.gif" OBJECT="GadgetsIntroObjs.20"> <B>Point key:</B> set the caret, the insertion point for a new gadget. Placing the caret in a gadget is called <I>focusing</I> a gadget. There is only one focused gadget at any one time.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro9.gif" OBJECT="GadgetsIntroObjs.24"> <B>Execute key:</B> a button is pressed, a check box is toggled (checked/unchecked), a slider moved, etc. If a <I>Cmd</I> attribute is defined, that command is executed.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro10.gif" OBJECT="GadgetsIntroObjs.28"><B> Select key:</B> select a gadget. A selected gadget is covered by a white semi-transparent pattern.
<P>Try those three single key clicks to convince yourself:
<P>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro11.gif" OBJECT="GadgetsIntroObjs.32">
<P>Set the caret in the panel and execute the command <CALL CMD="Gadgets.Insert Clock ~"><FONT COLOR=FF0000>Gadgets.Insert Clock~</FONT></CALL>.
<P>Special attention should be paid to the use of the right mouse key:
<BR>
<UL>
<BR>
<LI>Several gadgets located in the <I>same</I> container may be selected in succession. The group of selected gadgets becomes <B>the</B> selection.
<LI>Pressing that key and dragging causes a spanning rectangle to appear. All the gadgets <I>entirely contained</I> in this rectangle become selected: the group also becomes <B>the</B> selection. This is similar to selecting a text.
<LI>Clicking in an empty area clears the selection.
<LI>Clicking on a selected gadget deselects it.</UL><B>
<BR>Exceptions:</B> some gadgets can be selected only when the mouse focus is positioned in the control area. That is the case for panels, name plates, text fields and text gadgets (except for the scroll bar at the left). For the latter three, in the active area the selection operates on the contained text.
<P>Finally, remember this:
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro12.gif" OBJECT="GadgetsIntroObjs.36"> neutralize the click or interclick.
<P>
<H2>
<A NAME="6"></A>Copying and deleting the selection</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro13.gif" OBJECT="GadgetsIntroObjs.40"> select gadget(s) and delete the selection.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro14.gif" OBJECT="GadgetsIntroObjs.44"> select gadget(s) and copy the selection over to caret.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro15.gif" OBJECT="GadgetsIntroObjs.48"> set the caret and copy the selection to caret.
<P>Practice with the gadgets in this panel:
<P>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro16.gif" OBJECT="GadgetsIntroObjs.52">
<P>The selection is often the target of Oberon commands and reacts to middle mouse clicks as explained below.
<P>Some gadgets do not respond to all of these mouse key clicks.
<P>
<H2>
<A NAME="ResMov"></A>Moving and resizing a gadget - MM key</H2>
Depending on where the mouse focus is located in the 
<A NAME="7"></A>control area, the middle mouse key is interpreted differently: the sides are used to move the gadget and the corners to change its size. Thus, placing the mouse focus:
<P><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro17.gif" OBJECT="GadgetsIntroObjs.57"><I> on a side</I> and dragging on the middle key moves the gadget (the mouse pointer changes into a grabbing hand). Movement is restricted to the <I>current</I> container and may be rejected when attempting to move the gadget completely out of its current container.
<P><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro18.gif" OBJECT="GadgetsIntroObjs.61"><I> in a corner</I> and dragging on the middle key resizes the gadget (the mouse pointer changes into a hand with a pointing index).
<P>In both cases when the key is released, the new location or size is set.
<P>Practice resizing and moving with the three gadgets in this colored panel:
<P>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro19.gif" OBJECT="GadgetsIntroObjs.65">
<P>You can easily verify the existence of the control area (or its absence) by slowly moving the mouse across a gadget whilst clicking the middle mouse key repeatedly. The control area is absent if the gadget cannot be resized or moved as described.
<P>Movement to another container can only be done with an <I>explicit</I> left or right key interclick as described below.
<P>
<H2>
<A NAME="8"></A>Moving and copying a gadget - Drag-and-drop with MM key</H2>
When moving a gadget, i.e. grabbing it by its side, if at the end of the mouse movement you interclick with the:
<P><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro20.gif" OBJECT="GadgetsIntroObjs.69"> left key: the gadget is moved to a new container at the mouse focus or when it remains in the current container, it is brought to the front of overlapping gadgets.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro21.gif" OBJECT="GadgetsIntroObjs.73"> right key: a copy of the gadget is inserted at the mouse focus (in the same or in a different container).
<P>Practice with the three gadgets in this colored panel:
<P>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro22.gif" OBJECT="GadgetsIntroObjs.77"> &nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro23.gif" OBJECT="GadgetsIntroObjs.81">
<P>Moving a gadget from one container to another is called a 
<A NAME="9"></A>consume operation. The new container <I>consumes</I> the gadget and the gadget is removed from its old location. Not only is this used to move an object from one panel to another, but also to provide a general 
<A NAME="10"></A>drag-and-drop facility. The consumer (called the receiver or recipient) may interpret the drop event in different ways: it may either absorb the consumee (which is called the <I>sender</I> or <I>initiator</I>) as a descendant (like most containers do), or it may initiate some other event. For example, a trash can may delete the file gadgets that it consumes, or a compiler may compile source texts. Some (receiver) gadgets may execute a user-defined command on a consume event. The Icon gadget is such a receiver.
<P>
<H2>
<A NAME="11"></A>Moving and copying the selection: an alternative way</H2>
When a gadget is selected, the control area is extended to the <I>entire</I> area covered by the gadget and it has the same functionality as the borders.
<P>There exists an alternative way to move or to copy the selection: press the middle mouse key on any selected gadget and drag the selection to a new location. If more than one gadget was selected, a rectangle spanning all the gadgets appears. An interclick with the left or the right mouse key has the same meaning as for a drag-and-drop operation.
<P>
<H2>
<A NAME="12"></A>Gadget locking</H2>
A flexible mechanism exists that allows the user to <I>lock</I> a gadget and so prevent inadvertent changes to a gadget.
<P>A locked container such as an iconizer, a note book or a panel <I>cannot</I> be resized. It can be moved with the middle mouse key when the mouse focus is positioned <I>anywhere</I> in the control area and it can be selected with a right move click <I>anywhere</I> in the gadget.
<P>Most application interfaces are supplied locked, but they can be unlocked at any time to be customized to the user's requirements or personal taste.
<P><HR>
<H1>
<A NAME="ModelGadget"></A>Model gadgets</H1>
A model gadget stores a data value useful to an application. It is quite simple in structure and behaviour and it cannot visualize itself on the display. The Gadgets system only provides a limited set of model gadgets that can store the basic Oberon data types namely BOOLEAN, LONGINT, LONGREAL and string (ARRAY 64 OF CHAR).
<P>To visualize the value stored in a model gadget the help of a visual gadget like the ones presented above is required. This is the well-known 
<A NAME="13"></A>Smalltalk 
<A NAME="14"></A>Model-Viewer-Controller framework (
<A NAME="15"></A>MVC). The model gadget contains the data vizualised by a visual gadget.
<P>
<A NAME="16"></A>In practice, several visual gadgets can show the value of the same model gadget - an example in given below. Each <B>view</B> ensures that it remains consistent with the model it represents. We also say that the visual gadget is 
<A NAME="17"></A><I>linked</I> to a specific model gadget.
<P>The idea behind a model gadget is that it can easily be manipulated by an Oberon program. In return, the visualization of the model is updated accordingly without the application program knowing that or how many such linked visual gadgets exist. This allows application programmers to insulate code against changes made to a user interface.
<P>You should however clearly understand that many visual gadgets (those described earlier are only a small subset of them) are programmed in such a way that they can also function without being linked to a model gadget.
<P>
<H2>
<A NAME="Boolean"></A>Boolean</H2>
Stores a BOOLEAN value. It may be linked to a button or a check box.
<P>
<H2>
<A NAME="Integer"></A>Integer</H2>
Stores a LONGINT value. It may be linked to a button, a check box, a slider or a text field.
<P>
<H2>
<A NAME="Real"></A>Real</H2>
Stores a LONGREAL value. It may be linked to a slider and a text field.
<P>
<H2>
<A NAME="String"></A>String</H2>
Stores an ARRAY OF CHAR of up to 64 characters. It may be linked to a slider or a text field.
<P><HR>
<H1>
<A NAME="Examples"></A>Some concrete examples</H1>

<H2>
<A NAME="18"></A>Radio buttons</H2>
<IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro24.gif" OBJECT="GadgetsIntroObjs.82">&nbsp; &nbsp;  <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro25.gif" OBJECT="GadgetsIntroObjs.84">&nbsp; &nbsp;  <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro26.gif" OBJECT="GadgetsIntroObjs.86">&nbsp; &nbsp;  Select a channel
<P>Here are three radio buttons. Like the buttons on a radio or TV tuner, clicking on a radio button selects only one of several (here 3) mutually exclusive options. When an option is selected its associated LED is lit.
<P>This effect is obtained by linking the set of radio buttons to a single integer gadget. Each button is given the specification of an integer value, and when the model gadget has that value, that button appears pressed.
<P>
<H2>
<A NAME="19"></A>Check boxes as radio buttons</H2>
Red&nbsp; &nbsp;  Green&nbsp; &nbsp;  Blue
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro27.gif" OBJECT="GadgetsIntroObjs.88">&nbsp; &nbsp;  <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro28.gif" OBJECT="GadgetsIntroObjs.90">&nbsp; &nbsp;  <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro29.gif" OBJECT="GadgetsIntroObjs.92">&nbsp; &nbsp;  Select a color
<P>Here is another form of radio buttons using check boxes. In this mode, the check mark is replaced by a rectangular mark.
<P>Here also, this effect is obtained by linking the set of check boxes to a single integer gadget. Each check box is given the specification of an integer value, and when the model gadget has that value, that box is checked.
<P>
<H2>
<A NAME="TwoViews"></A>A model gadget with two views</H2>
Here is an example of a gadget constellation where a slider and a text field are both linked to the same integer model gadget. The two visual gadgets act as views of the same invisible object. Behind the scene, things are organised as follows:
<P>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro30.gif" OBJECT="GadgetsIntroObjs.94">
<BR>Changing the position of the slider cause the integer gadget to be updated accordingly, which in turn causes the text field to be informed that the value of its model has changed. No programming is required to obtain this effect. It suffices to specify the gadgets and their linking.
<P>Now, look at this similar example in which the integer gadget's value is manipulated by a (very simple!) program capable of only just incrementing and decrementing that value by 1. You can observe that by clicking on either blue triangle.
<P>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro31.gif" OBJECT="GadgetsIntroObjs.103">
<P>
<H2>
<A NAME="20"></A>Extending the set of model gadgets</H2>
Typically application programmers would add their own model gadgets according to their needs. This requires programming.
<BR>For example, it is often useful to construct <I>compound models</I> that store more than one data value. The only such compound model that is delivered with the standard gadget collection is the 
<A NAME="21"></A>complex gadget which stores the real and the imaginary parts of a complex number. The source code for this gadget is supplied in the module <CALL CMD="Desktops.OpenDoc Complex.Mod"><FONT COLOR=FF0000>Complex.Mod</FONT></CALL> and an example of its use in an application is given in the module <CALL CMD="Desktops.OpenDoc Lissajous.Mod"><FONT COLOR=FF0000>Lissajous.Mod</FONT></CALL>.
<P><HR>
<H1>
<A NAME="Panel"></A>Panel</H1>

<A NAME="Context"></A>A panel is a two-dimensional organizer of gadgets. It may be regarded as a sheet of paper, on which gadgets are organized in a two-dimensional fashion. The gadgets contained inside a panel are called 
<A NAME="22"></A>descendant gadgets or its descendants and the panel itself is called the 
<A NAME="23"></A>ancestor or also the 
<A NAME="24"></A>context of any of these descendants. It is also adequate to categorize a panel as a 
<A NAME="25"></A>container gadget. Since a panel is itself a gadget, panels may appear inside panels, nested to any depth.
<P>A panel also support operations on groups of descendant gadgets and operations providing for an optimal layout and alignment of its descendants. A <A HREF="GadgetsUse.html#GridSnap">snapping grid</A> allows easy positioning of descendants. These can be aligned to the same baseline, height, size, or width, or organized vertically and horizontally. Operations on panels can be activated from the tools in the <CALL CMD="Desktops.OpenDoc Gadgets.Panel"><FONT COLOR=FF0000>Gadgets.Panel</FONT></CALL>. This panel is a user interface for creating and manipulating gadgets.
<P>The descendants are organized in priority and may overlap each other. A descendant generally keeps its current priority after being moved. Oberon commands put a gadget behind or in front of other gadgets. Newly inserted gadgets are always placed in front. The simplest way to bring a gadget to the front is to pick it up and consuming it again (Middle + left mouse key interclick).
<P>
<H2>
<A NAME="26"></A>Mouse commands on panels</H2>
Mouse events in panels are, with a few exceptions, consistent with what has been said before about gadgets. A right key dragging ending with a middle key interclick makes a shallow copy of the selection and copies it over to the caret position.
<P>Here is what is handled differently.
<P><B>When the panel is not locked:</B>
<P><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro32.gif" OBJECT="GadgetsIntroObjs.117"> <B>Execute key:</B> recognized by a descendant gadget when the mouse focus is positioned on it and without effect elsewhere in the <I>active</I> area.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro33.gif" OBJECT="GadgetsIntroObjs.121"> <B>Select key:</B> recognized <I>only</I> when the mouse focus is positioned in the control area.
<P><B>When the panel is locked:</B>
<P><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro34.gif" OBJECT="GadgetsIntroObjs.125"> <B>Execute key:</B> recognized by a descendant gadget when the mouse focus is positioned on it and without effect elsewhere in the <I>active</I> area.
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro35.gif" OBJECT="GadgetsIntroObjs.129"><B> Select key:</B> may be clicked anywhere to select it.
<P>A locked panel <I>cannot</I> be resized, and it can be moved with the middle mouse key when the mouse focus is positioned <I>anywhere</I> in the <I>control</I> area.
<P>
<H2>
<A NAME="27"></A>Panel with a model gadget</H2>
A panel may be linked to a model gadget. In that case the panel is not used as a viewer of the model gadget but rather as a placeholder for important data which is then usually represented by descendants.
<P><HR>
<H1>
<A NAME="Docum"></A>Document</H1>

<H2>
<A NAME="28"></A>Definition</H2>
A document is a named collection of gadgets that can be stored to and loaded from disk in one atomic action. Look at the name plate at the top left corner of this document: it's name is "GadgetsIntro.Book". The disk file is given the same name as the document.
<P>Documents can be opened and displayed in the well-known, familiar Oberon <A HREF="Oberon3TUI.html#Viewer">viewer</A> system. In addition, documents can be inserted (i.e. opened) in what we call a 'desktop' as will be explained in the next chapter.
<P>
<A NAME="DocMenuBar"></A>
<A NAME="29"></A>A document usually presents itself with a menu bar containing often used commands related to that document, e.g. 'Close', 'Search', 'Store', etc., and a name plate <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro36.gif" OBJECT="GadgetsIntroObjs.133">. This appearance is familiar to Oberon users. Alternatively, a document can be inserted on the desktop without a menu bar.
<P>
<H2>
<A NAME="30"></A>Document type</H2>
Documents have a primary type that is determined by the root frame they consist of. For example, there are text and panel document types. The document may contain further sub-frames of any type. Each document is stored in a file and can be reconstructed/loaded from disk by the document manager when just the file name is known. The document is self-contained and knows enough about itself to load, store and print. The main advantage is that the user need not know which application program is needed to open a certain document.
<P>The document type is determined by what is called the 
<A NAME="31"></A>document New procedure when a new document is opened (see below) which is also recorded in the file when the document is stored. This information is used again when the document is opened. Here is a correspondance table 'Document New Procedure' to 'Document type':
<BR>
<PRE>
&nbsp; &nbsp; &nbsp; &nbsp; TextDocs.NewDoc&nbsp; &nbsp; &nbsp; &nbsp; Text document
&nbsp; &nbsp; &nbsp; &nbsp; PanelDocs.NewDoc&nbsp; &nbsp; &nbsp; &nbsp; Panel document
</PRE>
<BR>
<H2>
<A NAME="32"></A>Open an empty document - Desktops.OpenDoc</H2>
<B>Desktops.OpenDoc "("documentNewProcedure")"</B> opens an empty, unnamed document of the specified type and inserts it in the desktop.
<P>Try this <CALL CMD="Desktops.OpenDoc (PanelDocs.NewDoc)"><FONT COLOR=FF0000>Desktops.OpenDoc (PanelDocs.NewDoc)</FONT></CALL> . Watch the name plate: it is empty.
<P>
<H2>
<A NAME="33"></A>Open an existing document - Desktops.OpenDoc</H2>
<B>Desktops.OpenDoc fileName</B> opens the document <I>fileName</I>. If a document with that name has previously been stored, it is loaded and the document is inserted in the display space. Otherwise, an empty document of a certain type is created. The type is implicitely determined by the file name's suffix:
<BR>
<PRE>
&nbsp; &nbsp; &nbsp; &nbsp; .Text&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Text document
&nbsp; &nbsp; &nbsp; &nbsp; .Panel&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Panel document
&nbsp; &nbsp; &nbsp; &nbsp; .Pict&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Picture document
&nbsp; &nbsp; &nbsp; &nbsp; anything else&nbsp; &nbsp; Text document
</PRE>
<BR>
<H2>
<A NAME="34"></A>Open and recast an existing document - Desktops.OpenDoc</H2>
<B>Desktops.OpenDoc fileName "("documentNewProcedure")"</B> does the same as above and attempts (not always succesful) to cast the original document to a new type.
<P>
<H2>
<A NAME="35"></A>Insert an existing document at the caret - Desktops.InsertDoc</H2>
<B>Desktops.InsertDoc fileNam</B><I>e</I> opens the document <I>fileName</I>. If a document with that name has previously been stored, it is loaded and the document is inserted in the display space at the caret, <I>without</I> a menu bar. Otherwise, an empty document is opened. The document type is determined by the rule described earlier for Desktops.OpenDoc.
<P>
<H2>
<A NAME="36"></A>Replace an existing document - Desktops.ReplaceDoc</H2>
<B>Desktops.ReplaceDoc fileName</B> replaces the document from which the command is executed with another document <I>fileName</I>. If a document with that name has previously been stored, it is loaded and it substitutes itself to the current document. Otherwise, an empty document is opened. The document type is determined by the rule described earlier for Desktops.OpenDoc. An in-place switching of documents takes place.
<P><I>Example of application:</I> this command is frequently used in the tool documents supplied with the system, such as Desktops.Tool, Programming.Tool,  etc. The command is used there in the hypertext links such as [ Desktop ], [ Applications ], etc.
<P>
<H2>
<A NAME="37"></A>Store the marked document - Desktops.StoreDoc</H2>
<B>Desktops.StoreDoc *</B> stores the marked document in a file whose name is taken from the document's name plate. If executed from the document itself, the document from where the command is executed is implied. The document must then not necessarily be marked and the * parameter is also not required. The file is stored in the current directory. If a file with that name already exists, it is renamed: the suffix '.Bak' is appended to its original name.
<P>
<H2>
<A NAME="38"></A>Print the marked document - Desktops.PrintDoc</H2>
<B>Desktops.PrintDoc printerName *</B> prints the marked document on the named printer.
<BR>With the DOS version, you may choose between the name of a printer server or LPT1, LPT2, etc.
<BR>In Oberon for Windows, the <I>printerName</I> parameter is IGNORED and the default printer, defined in the Windows Print Manager, is used to print the document. Also, in Oberon for Windows, printing is indicated by a reverse video mouse pointer until the document has been placed on the printer queue.
<BR>In the MacOberon version, you may choose between the printer names QuickDraw, PostScript and EPS. QuickDraw prints to the printer selected in the chooser, PostScript generates a postscript file and EPS an encapsulated postscript file.
<BR>If executed from the document itself, the document from where the command is executed is implied. The document must then not necessarily be marked.
<P>
<H2>
<A NAME="DeskMake"></A>Recall a document - Desktops.Recall</H2>
<B>Desktops.Recall</B> reopens the last closed document in the desktop in which the command is executed. The document is opended in the state it had when it was closed and it is placed in the center, but if the star-shaped marker is set first, the marker focus determines the top left corner if the document.
<P>
<H2>
<A NAME="39"></A>Selection in a document</H2>
As indicated before, a document acts as an invisible "wrapper" for the main gadget it contains. To distinguish a selection of the main gadget from that of the wrapper a two-phase selection is used. Clicking with the right mouse key in the main gadget's control area selects it (appears in white), while a second click selects the document (appears in blue); that is, gadgets are selected in an inside-out manner and are identified by their color.
<P><HR>
<H1>
<A NAME="Desktop"></A>Desktop</H1>

<H2>
<A NAME="40"></A>Definition</H2>
A desktop is a named work surface on which documents and a variety of other gadgets are organised in a two-dimensional fashion with overlapping objects. Look at the name plate at the top left corner of this desktop: it's name is most probably "Oberon.Desk". A desktop can be stored to and loaded from disk in one atomic action. The disk file is given the same name as the desktop. This certainly reminds you what has been said earlier about documents.
<P>When a desktop is stored, only the <I>layout</I> of the work surface is recorded: the documents on the desktop are <I>not</I> stored, these have to be stored explicitely by the user. Later on the same desktop can be reloaded and recreated from the recorded information.
<P>In this way a user can create many different work environments that are suited to the task at hand and to the display resolution available. Similarly, several users may share the same computer and open their personalised desktop. Like any other file, a desktop can be ported to other computers.
<P>
<H2>
<A NAME="41"></A>Open a desktop - Desktops.Open</H2>
<B>Desktops.Open fileName</B> opens a desktop <I>fileName</I>. If a desktop with that name has previously been stored, it is loaded and inserted in the display space. Otherwise, a new default desktop is created. Normally Gadgets uses the same strategy to place the desktop as Oberon's <I>Edit.Open</I> to <A HREF="Oberon3TUI.html#VPlace">place a viewer</A>, i.e. in the user track. However, you can override this preference and indicate where the desktop should appear by placing the star-shaped marker. The desktop is placed in the track of the pointer and its top edge will be at the height of the pointer.
<P>
<H2>
<A NAME="42"></A>Layout and properties</H2>
A desktop presents itself as an Oberon viewer without menu bar. Although the menu bar is absent, it can be resized: positioning the mouse focus in a narrow invisible area at the top and pressing the left key cause a thick blue horizontal line to appear, telling you that a tracking mode has been entered. Dragging on the left key will determine the new top position in the track. On release of the key, the top edge moves to the height of the mouse focus and the desktop content is redrawn. The range of movement is restricted in the same manner as it is for Oberon viewers.
<P>If the middle mouse key is interclicked while dragging, the desktop may be placed anywhere on the display. In particular, it may be relocated across track boundaries. That may of course only be the case in a hybrid (Oberon - Gadgets) display layout.
<P>Try this <CALL CMD="Desktops.Open YourNewDT"><FONT COLOR=FF0000>Desktops.Open YourNewDT</FONT></CALL> .
<P>You have just realised that the display surface may contain more than one desktop at a time: a desktop is also a (container) gadget. In such a layout, gadgets and documents may be moved or copied across desktops.
<P>
<H2>
<A NAME="43"></A>Grow a desktop - Desktops.Grow</H2>
<B>Desktops.Grow </B>enlarges the desktop in which the command is executed. The desktop grows to cover the whole track in which it appears, or if it already fills a track, it grows to cover the whole display.
<P>
<H2>
<A NAME="44"></A>Copy a desktop - Desktops.Copy</H2>
<B>Desktops.Copy</B> opens a copy of the desktop in which the command is executed. The copy displays the same data as the original desktop It is a clone).
<P>
<H2>
<A NAME="45"></A>Close a desktop - Desktops.Close</H2>
<B>Desktops.Close</B> collapses or removes the desktop in which the command is executed.
<P>
<H2>
<A NAME="46"></A>Store a desktop - Desktops.Store</H2>
<B>Desktops.Store fileName</B> stores the desktop in which the command is executed in a disk file with the specified name, i.e. the name appearing in the name plate. If a file with that name already exists, it is renamed: the suffix <B>.Bak</B> is appended.
<P>
<H2>
<A NAME="47"></A>Change the backdrop - Desktops.ChangeBackdrop</H2>
<B>Desktops.ChangeBackdrop picturefileName</B> change the backdrop of the marked desktop. Use the name of a non-existing picture to reset the backdrop.
<P><HR>
<H1>
<A NAME="View"></A>View</H1>
A view is a camera view with a variable perspective on a gadget which cannot easily be presented in its entirety on the display surface. Such may be the case with a large drawing. A second view of the same visual gadget could also show a different part of the same drawing. Even multiple views may be constructed: any of them may be edited since they all represent the same base gadget.
<P>Original picture&nbsp; &nbsp;  Scaled view #1&nbsp; &nbsp;  Scaled view #2
<BR><IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro37.gif" OBJECT="GadgetsIntroObjs.135">&nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro38.gif" OBJECT="GadgetsIntroObjs.136">&nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro39.gif" OBJECT="GadgetsIntroObjs.139">
<P>Behind the scene the situation is comparable to what you have experienced with the <A HREF="#TwoViews">model with two views</A> but here the model is a visual gadget (a picture).
<P>Pressing the middle key when the mouse focus is positioned inside one of these views causes a spanning rectangle to appear showing the real dimension of the object being viewed. Dragging on that key in any direction causes the rectangle to move. When the key is released, the new view is drawn. The picture used here is named "Default.Pict" and is included in this Oberon System 3.
<P>A view is also a gadget and views may be nested. A view may be empty, that is displays nothing. Dropping a gadget inside an empty view makes the view display the consumee.
<BR>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro40.gif" OBJECT="GadgetsIntroObjs.142">&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/GadgetsIntro41.gif" OBJECT="GadgetsIntroObjs.143">
<P>The last example on the right shows a camera view of a panel with a button. The viewpoint can be changed by picking the panel by its border and dragging it a new location.
<P><HR>
<H1>
<A NAME="48"></A>What's next?</H1>
Acquire a deeper knowledge in the use and the composition of gadgets and get to know an extended collection of gadgets in <A HREF="GadgetsUse.html#">Using Gadgets</A>.
<P>Learn how to manipulate gadgets from within Oberon programs in <A HREF="GadgetsOberon.html#">Using Gadgets from within Oberon</A>.
<P>If you had liked to develop your own gadgets learn all about it in <A HREF="GadgetsProg.html#">Programming new Gadgets</A>.
<BR>
<HR>
<BR>Revised on July 6, 1996<BR>Installed on 14 Feb 1997<HR></BODY>
</HTML>

