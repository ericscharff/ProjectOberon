<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML Level 2.0 2//EN">
<!-- Generated by Text2HTMLGIF (afi, ejz)-->
<HTML>
<HEAD>
<META NAME="Author" CONTENT="Andre Fischer">
<TITLE>Compression and Archiving Tools</TITLE>
</HEAD>
<BODY><H1><CENTER>Compression and Archiving Tools</CENTER></H1><HR>
<CENTER><B>[ Text | <A HREF="Compress.Contents.html">Contents</A> | <A HREF="Compress.Index.html">Index</A> | <A HREF="Big.Index.html">Master index</A>]</B></CENTER><BR>
<BR>
<H1>
<A NAME="0"></A>Tutorial objective</H1>
Learn how to handle or create compressed files and archive files distributed on diskette, by FTP and by e-mail.
<P>Estimated time: 20 minutes.
<P><HR>
<H1>
<A NAME="compress"></A>Compress</H1>
<I>Compress</I> compresses several files using the LZSS compression technique and packs them into a single archive file. An <I>archive</I> (file) is portable among all Oberon platforms. By convention, the last part of an archive name should be <B>Arc</B>. A file having a file name extension <B>.Arc</B> can be opened directly with the command Desktops.OpenDoc (see below)
<P><B>Caution:</B> An Oberon archive is a binary file. To send it by e-mail it must be processed by the <A HREF="#AsciiCoder">AsciiCoder.CodeFiles</A> command.
<P>
<H2>
<A NAME="1"></A>Principle of operation</H2>
LZSS uses a dictionary-based compression scheme: it uses previously seen text as a dictionary and replaces phrases in the input text with pointers into the dictionary to achieve compression. The LZSS compression algorithm is highly asymmetrical. The compression routine is fairly complicated and does quite a bit of work. In comparison, the expansion code is extremely simple and has little work to do. This makes LZSS an excellent choice for data that needs to be compressed once and expanded many times.
<P>More information on the LZSS compression technique can be found in:
<BR>
<UL>
<BR>&nbsp; &nbsp; &nbsp; &nbsp; The Data Compression Handbook
<BR>&nbsp; &nbsp; &nbsp; &nbsp; Mark Nelson
<BR>&nbsp; &nbsp; &nbsp; &nbsp; M &amp; T Publishing - ISBN 0-13-202854-9
<BR></UL>
<BR>
<A NAME="2"></A>
<A NAME="3"></A>
<BR>Compress performs the same functions as the common Unix programs <B>compress</B> and <B>uncompress,</B> together with the Unix tape archiver <B>tar</B>. TAR simply takes a group of files and combines them into a single file, and does not perform any compression.
<P>Note the difference of strategy between Unix and Oberon. A Unix <B>.tar.Z</B> file is a compressed (tape) archive. An Oberon archive contains individually compressed files, which makes it easy to add, extract, or delete files in an archive. As a result, the format of an Oberon archive is not compatible with that of a file produced by the UNIX utility.
<P>
<H2>
<A NAME="4"></A>Maintaining an archive document</H2>
Maintenance work on an archive file starts by opening the document with the command Desktops.OpenDoc. Try this example using a file name Archive.Arc:
<BR>
<UL>
<BR>&nbsp; &nbsp; &nbsp; &nbsp; <CALL CMD="Desktops.OpenDoc Archive.Arc"><FONT COLOR=FF0000>Desktops.OpenDoc Archive.Arc</FONT></CALL></UL>
<P>This opens a document viewer of that name, displaying a directory of the files contained in the archive. If the archive does not yet exist, it is automatically created. The same result can be obtained by executing the Compress.Directory command, described below. Maintenance work can be comfortably performed with the help of the command buttons in the menu bar. Each button in the title bar, except [Close], executes a command defined in the Compress module:
<BR>
<UL>
<BR>&nbsp; &nbsp; &nbsp; &nbsp; [Open ^] &nbsp; &nbsp; Compress.Open ^
<BR>&nbsp; &nbsp; &nbsp; &nbsp; [Add ^] &nbsp; &nbsp; Compress.Add ^
<BR>&nbsp; &nbsp; &nbsp; &nbsp; [Extract ^] &nbsp; &nbsp; Compress.Extract ^
<BR>&nbsp; &nbsp; &nbsp; &nbsp; [Delete ^] &nbsp; &nbsp; Compress.Delete ^
<BR></UL>
<BR>These commands are described below.
<P>The compress commands are collected in the <CALL CMD="Desktops.OpenDoc Compress.Tool"><FONT COLOR=FF0000>Compress.Tool</FONT></CALL>
<A NAME="5"></A>
<P>
<H2>
<A NAME="6"></A>Display archive directory - Compress.Directory</H2>
<B>Compress.Directory [\d] (archiveName | ^) </B>opens a text viewer named archiveName listing the names of the files contained in the archive. If the archive does not yet exist, it is automatically created. When the option <B>\d</B> is present, additional information is given for each file: date and time when added to the archive, compressed size in bytes, and size in percent of the original uncompressed file.
<P>
<H2>
<A NAME="7"></A>Add a list of files - Compress.Add</H2>
<B>Compress.Add archiveName ({fileName} ~ | ^)</B> compresses and adds the named files to the named archive. If a file with a matching name already exists, its name is suffixed with a sequence number, as is shown here:
<BR>if Char.Mod exists, Char.Mod0 is added.
<P>
<H2>
<A NAME="8"></A>Extract all files - Compress.ExtractAll</H2>
<B>Compress.ExtractAll archiveName</B> extracts and decompresses all the files from the named archive, placing them in the current directory.<B>
<BR>Caution</B>: If a file with a matching name already exists, it is overwritten. A warning message is written to the Oberon log.
<P>
<H2>
<A NAME="9"></A>Extract a list of files - Compress.Extract</H2>
<B>Compress.Extract archiveName ({fileName} ~ | ^)</B> extracts and decompresses the named files from the named archive, placing them in the current directory.<B>
<BR>Caution</B>: If a file with a matching name already exists, it is overwritten. A warning message is written to the Oberon log.
<P>
<H2>
<A NAME="10"></A>Delete a list of files - Compress.Delete</H2>
<B>Compress.Delete archiveName ({fileName} ~ | ^)</B> deletes the named files from the named archive.
<P>
<H2>
<A NAME="11"></A>Open a file - Compress.Open</H2>
<B>Compress.Open archiveName (fileName | ^)</B> opens a document viewer named <I>fileName</I> displaying the named file in the named archive. Use this command if you wish to display the contents of one of the compressed file without actually creating (or replacing) the file in the current directory.
<P>
<H2>
<A NAME="12"></A>Definitions.Arc - An example of archive</H2>
<I>Definitions.Arc</I> is an important and central archive in Oberon, because it is the information repository in which <A HREF="Watson.html#archive">Watson</A> may be requested to search module definitions. An alternative way to display a module definition stored in that archive, is to display its directory with Desktops.OpenDoc Definitions.Arc, to select a name in the list and to click on the [Open ^] button in the title bar, or to use the Compress.Open command.
<P><HR>
<H1>
<A NAME="AsciiCoder"></A>AsciiCoder encoder/decoder</H1>
The <I>AsciiCoder</I> encodes and decodes a text or the most recently selected text, also including gadgets, appearing in a document viewer. It can also be used to encode and decode arbitrary files. The data stream generated by encoding is made only of printable ASCII characters and is apt to be sent by electronic mail. It is always presented in a text viewer where it can be edited to become a part of an e-mail message for instance. In addition, the encoded data is preceded by the adequate command for decoding it, that is AsciiCoder.DecodeText or AsciiCoder.DecodeFiles according to the case. The decoding command will automatically obtain the information on the amount of information to decode, i.e. it knows where the encoded data ends. An Oberon user who receives such an e-mail, can immediately decode the information.
<P>
<H2>
<A NAME="Code"></A>Encode a text - AsciiCoder.CodeText</H2>
<B>AsciiCoder.CodeText [%] (* | @)</B> encodes the text, including gadgets, of the marked viewer (*), or if the command is followed by <B>@</B>, the text contained in the most recent selection. When the <B>%</B> option is present, the text is compressed at the same time. A document viewer named "AsciiCoder.CodeText" is automatically opened. It presents the encoded data preceded by an appropriate <B>AsciiCoder.DecodeText [%]</B> command.
<P>
<H2>
<A NAME="13"></A>Encode a list of files - AsciiCoder.CodeFiles</H2>
<B>AsciiCoder.CodeFiles [%] ({fileName} ~ | ^)</B> encodes all the files named in the list or all the files named in the selection. When the % option is present, the files are compressed at the same time. A document viewer named "AsciiCoder.CodeFiles" is automatically opened. It presents the encoded data preceded by an appropriate <B>AsciiCoder.DecodeFiles [%] </B>{fileName} ~ command.
<P>
<H2>
<A NAME="Decode"></A>Decode a text - AsciiCoder.DecodeText</H2>
<B>AsciiCoder.DecodeText [%] (text | @)</B> decodes the Ascii encoded text which follows the command, or the text starting at the beginning of the most recent selection. A document viewer named "AsciiCoder.DecodeText" is automatically opened, presenting the decoded information. When the <B>%</B> option is present, the text is expanded at the same time.
<P>
<H2>
<A NAME="14"></A>Decode a list of files - AsciiCoder.DecodeFiles</H2>
<B>AsciiCoder.DecodeFiles [%] ({fileName} ~ text | @)</B> decodes the Ascii encoded text which follows the command, or the text starting at the beginning of the most recent selection. The contained files are written in the current directory. Existing files are not overwritten since they are first renamed to <B>.Bak</B> files. The file names must appear at the beginning of the selection, ahead the coded data. The command <B>AsciiCoder.CodeFiles</B> takes care of that. When the <B>%</B> option is present, the files are expanded at the same time.
<BR>
<A NAME="15"></A>
<BR>The <CALL CMD="Desktops.OpenDoc AsciiCoder.Tool"><FONT COLOR=FF0000>Desktops.OpenDoc AsciiCoder.Tool</FONT></CALL> presents in a handkerchief a useful collection of the commands just described, in all variants.
<P><HR>
<H1>
<A NAME="Base64"></A>Base64 encoder/decoder</H1>
The <I>Base64</I> module encodes and decodes a file, even including gadgets. The data stream generated by encoding is made only of 64 ASCII characters and is apt to be sent by electronic mail. It is always presented in a text viewer where it can be edited to become a part of an e-mail message for instance.
<P>
<H2>
<A NAME="16"></A>Encode a file - Base64.Encode</H2>
<B>Base64.Encode fileName</B> encodes the named file. A document viewer named "Encode" is automatically opened. It presents the encoded data.
<P>
<H2>
<A NAME="17"></A>Decode a text and store it in a file - Base64.Decode</H2>
<B>Base64.Decode fileName (~ | ^)</B> decodes the encoded text which follows the <B>fileName ~</B>, or if the <B>fileName</B> is followed by ^, the text starting at the most recent selection. The result is written in the named file in the current directory.<B>
<BR>Caution</B>: If a file with a matching name exists on the hard disk, it is overwritten.
<P><HR>
<H1>
<A NAME="UUDecoder"></A>UUDecoder</H1>
Unix <I>uuencoded files</I> are frequently posted to Usenet newsgroups or sent as mail messages. A uuencoded file is a binary file that has been encoded as a text file by the Unix <B>uuencode</B> program. Note that this transformation inflates the binary file rather than compress it!
<P>If you happen to receive such a file, you may decode it with the UUDecoder.Decode command which is documented in the <CALL CMD="Desktops.OpenDoc UUDecoder.Tool"><FONT COLOR=FF0000>UUDecoder.Tool</FONT></CALL>
<A NAME="18"></A> and below.
<P>
<H2>
<A NAME="19"></A>Decode a text - UUDecoder.Decode</H2>
<B>UUDecoder.Decode begin .... | @</B> decodes the text which follows the command, or the text starting at the beginning of the most recent selection.
<P>
<H2>
<A NAME="20"></A>Decode a list of files - UUDecoder.Decode</H2>
<B>UUDecoder.Decode {fileName} ~ | ^</B> decodes all the files named in the list or all the files named in the selection.
<P><HR>
<H1>
<A NAME="Overview"></A>Overview</H1>
<IMG ALT="Cool Oberon Object " SRC="images/Compress1.gif" OBJECT="CompressObjs.0">
<P><IMG ALT="Cool Oberon Object " SRC="images/Compress2.gif" OBJECT="CompressObjs.23">
<P><HR>
<H1>
<A NAME="21"></A>What's next?</H1>
Distribute your custom developed Oberon extensions in compressed format or as Oberon archive files, by e-mail or by uploading them by FTP on an FTP server for instance.
<BR>
<HR>
<BR>Revised on July 6, 1996<BR>Installed on 14 Feb 1997<HR></BODY>
</HTML>

