<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML Level 2.0 2//EN"><!-- Generated by Text2HTMLGIF (afi, ejz)--><HTML><HEAD><META NAME="Author" CONTENT="Andre Fischer"><TITLE>Columbus User's Guide</TITLE></HEAD><BODY><H1><CENTER>Columbus User's Guide</CENTER></H1><HR><CENTER><B>[ Text | <A HREF="Columbus.Contents.html">Contents</A> | <A HREF="Columbus.Index.html">Index</A> | <A HREF="Big.Index.html">Master index</A>]</B></CENTER><BR><BR><H1><A NAME="0"></A>Objective</H1>Learn how to obtain object and library information and also how to customize objects and manipulate the contents of public libraries with the inspection tool Columbus. Typical activities are: inspecting and modifying gadget attributes and adding new attributes. Columbus not only includes all the facilities currently provided by the Inspector and the DetailInspector, but goes well beyond that. Therefore, the latter tools will be phased out in the medium term.<P>Before you start reading this tutorial, you should be familiar with the Gadgets system and its components and you should have knowledge about the concept of attributes. To learn more about the gadgets refer to <A HREF="GadgetsUse.html#">Using Gadgets</A>. A very important thing to know is the use of RefGadgets. A description of the gadget and its use is at the end of the <CALL CMD="Watson.ShowDef RefGadgets.Mod"><FONT COLOR=FF0000>definition file RefGadgets.Def</FONT></CALL>.<P>Before you start manipulating public libraries, you should be familiar with the concept of libraries used in the Oberon System 3.<P>Estimated time: 30 minutes.<P><HR><H1><A NAME="1"></A>Introducing Columbus</H1><BR><IMG ALT="Cool Oberon Object " SRC="images/Columbus1.gif" OBJECT="ColumbusObjs.0"><BR>Welcome to<IMG ALT="Cool Oberon Object " SRC="images/Columbus2.gif" OBJECT="ColumbusObjs.2"><BR><IMG ALT="Cool Oberon Object " SRC="images/Columbus3.gif" OBJECT="ColumbusObjs.3"><P><A NAME="2"></A>Columbus is a very versatile intrument that can be applied to any gadget (visual or model) for an inspection of its identity, attributes, links and properties. When applied to a specific gadget, the tool immediately adjusts its shape, so to represent an attribute form for this gadget. Note that this form is a document created by program, however. The tool can also be used to manage public libaries and their content.<P>In practice, Columbus presents itself in <I>two</I> different "variable geometry" documents (they however always fit in the system track). One of them is used to inspect and configure the state of objects and is called "Objects.Panel". The other one, called "Libraries2.Panel", is used for manipulating public libraries. Parts of the "Libraries2.Panel" are integrated in the object inspector. The "Objects.Panel" can directly be opened from the library editor.<P><HR><H1><A NAME="3"></A>Using the Object Inspector</H1>First, press the Esc key, to make sure that all marks and selections are removed. The inspector panel is opened with the command <CALL CMD="Columbus.Inspect ~"><FONT COLOR=FF0000>Columbus.Inspect ~</FONT></CALL><P>The command is used here <I>without</I> parameter, but later on, you will learn that the name of an object may also be specified after the command. The command tries to locate a gadget to inspect: it can be either a marked (*) or a selected visual gadget. If no gadget can be found, as is the case now, a minimal empty panel document "Objects.Panel" is opened.<P><IMG ALT="Cool Oberon Object " SRC="images/Columbus4.gif" OBJECT="ColumbusObjs.5"><P>It contains only just the Columbus logo and a button captioned with a magnifying glass. This button is the <I>inspect</I> button and is used to inspect an object. We shall refer to it as [Inspect] button.<P>Move the panel to the system track of your display or to the side of your desktop, depending on your mode of operation. Now, select this panel -> <IMG ALT="Cool Oberon Object " SRC="images/Columbus5.gif" OBJECT="ColumbusObjs.6"> and click on the <I>inspect</I> button. What you see now is the <I>attribute view</I> of the panel being inspected; this is evidenced by the little red LED in the button. But several other views can be accessed using the other buttons in the row. They will be presented and described in a subsequent section. The obj1 panel's attributes are presented with their values.<P>Select this button -> <IMG ALT="Cool Oberon Object " SRC="images/Columbus6.gif" OBJECT="ColumbusObjs.8"> and click on the inspect button again. As you can see a new button <IMG ALT="Cool Oberon Object " SRC="images/Columbus7.gif" OBJECT="ColumbusObjs.9"> appeared on the right of the inspect button. This button is used to go back one step in the panel's history. Click on the button and you return to the information of the previously selected panel.<P>In the top right corner you can see a visual reference, which represents the currently inspected object.<P>The characteristics and the function of this gadget are presented now.<P><H2><A NAME="4"></A>Visual reference gadget</H2>A <I>visual reference gadget</I> stores a reference to any object of type Objects.Object. This frame can have three different representations:<BR><UL><BR><LI></FONT><IMG ALT="Cool Oberon Object " SRC="images/Columbus8.gif" OBJECT="ColumbusObjs.13"> - when it does not refer to an object,<LI></FONT><IMG ALT="Cool Oberon Object " SRC="images/Columbus9.gif" OBJECT="ColumbusObjs.15"> - when it refers to a visual gadget,<LI></FONT><IMG ALT="Cool Oberon Object " SRC="images/Columbus10.gif" OBJECT="ColumbusObjs.17"> - when it refers to a model gadget.</UL><BR>The practical advantage of this gadget is that a reference represents an object irrespective of its type (visual gadget or model) and of its size. It can be dragged-and-dropped or copied over to another context just as easily as the object it represents.<P>A visual reference can be changed either by dropping a visual gadget into its frame or by copying over a selected visual gadget. Alternatively, a reference from another reference can be dropped or copied over with the same effect. When a reference is changed by such a user interaction, it will execute a consume command if so specified. To remove (or clear) the reference use a right-left interclick inside the reference. Like most other visual gadgets, a reference may execute a command when clicked on.<P>We may now proceed with a few exercises in order to verify what has just been presented.<P>To clear the Columbus panel right-left click inside the <B>Current Object</B> reference. The panel returns to a minimal size. Press the [back] button to return to 'obj1'. Now, set a new reference by dropping a gadget into the reference. Middle-right click on the border of any gadget you would like to inspect. The mouse pointer changes to a flat hand. Release the mouse buttons on top of the reference. The Columbus panel now shows information about the dropped gadget. The other way to set a new object is to copy over (left-middle click) a selected gadget into the reference. Now, close the Columbus panel and click on the following command.<P>In conclusion, this visual reference can be used to clear the panel or to set a new object to inspect.<P>&nbsp; &nbsp; <CALL CMD="Columbus.Inspect Columbus.Playground ~"><FONT COLOR=FF0000> Columbus.Inspect Columbus.Playground ~</FONT></CALL><P>A new Columbus panel opens again (move it to the right side of your screen). The inspected object is a public object named 'Playground' obtained from the "Columbus.Lib". Now open a new <CALL CMD="Desktops.OpenDoc FunPark.Text(TextDoc)"><FONT COLOR=FF0000>text</FONT></CALL> and drag-and-drop its visual reference into the document panel (middle-left click into the reference, drag the mouse over the document and release the mouse buttons). Place the inserted panel in the top left corner of the document. Select the gadget and press the inspect button.<P>Note that depending on the object this list of available views can differ. Again select this check box -> <IMG ALT="Cool Oberon Object " SRC="images/Columbus11.gif" OBJECT="ColumbusObjs.18"> and inspect the object with the inspect button or drop it into the reference. There are less views you can choose from. Press the <B>[ &lt;= ]</B> button to return to the object "Playground".<P>We shall now describe in detail all the possible views of an object.<P><H2><A NAME="5"></A>Object views</H2>The current view is always identifiable by the red LED in the button.<P><B>[Attr]</B> - <I>attribute view</I><BR>This view displays the attributes of the inspected object with their values in the <B>Attributes</B> section. It is the <I>preferred view</I> which is always presented first when a new <I>object</I> is inspected (but for a library the library view is presented first, of course). You can change the attribute values and apply them to the object by clicking the <B>[Apply]</B> button on the right side of the inspector panel.<P><I>Try this:</I> change the attribute 'Color' to 1 and press the [Apply] button. The previously inserted panel in the document changes its color to red.<P>The <B>New Attribute</B> section is used for adding an attribute to the current object. It features two text fields: in the first one enter the new attribute's name, in the second one its value. To add the attribute click on the <B>[Add]</B> button. An added attribute can be removed with a click on the <B>[Del]</B> button. Enter the name of the attribute to delete in the Attr. Name field.<P><I>Try this:</I> enter a name (e.g. 'New1') and a value (e.g. 'Value1') and press the [Add] button. The attribute is immediately added to the object's attribute list. Try another one, with 'Name2' and value 'Yes'.<P>This view is the starting point for an inspection tour of the current object with excursions to other related objects or libraries. Every step is recorded in a history stack, making it possible to regress step by step by clicking the <IMG ALT="Cool Oberon Object " SRC="images/Columbus12.gif" OBJECT="ColumbusObjs.20"> button. However, if any other view (among those described below) is presented, clicking on the <B>Current Object</B> reference at the top right, will project this view again.<P><B>[Link]</B> - <I>link view</I><BR>This view shows the links of the inspected object in the <B>Links</B> section. You can change the object links and apply them to the object by clicking the <B>[Apply]</B> button on the right side of the inspector panel.<P>The <B>New Link</B> section is used for adding a link to the current object. It features a text field for specifying the new link's name, and an empty visual reference where to drop the object to link. To add the link click on the <B>[Add]</B> button. An added link can be removed with a click on the <B>[Del]</B> button. Enter the name of the link to delete in the Link Name field.<P>To check out, how this works, drag-and-drop the object of this reference -> <IMG ALT="Cool Oberon Object " SRC="images/Columbus13.gif" OBJECT="ColumbusObjs.21"> into the link 'Picture' on the inspector panel (use middle-right interclick). Press the [Apply] button and see the panel in the text (nice ?!).<P><B>[Coords]</B> - <I>coordinates view</I><BR>This button is present <I>only</I> when a <I>visual</I> gadget is being inspected. This view shows the coordinates of a visual gadget. This view is not available for models (see the panel with 'Columbus.Background'). <P><I>Try this: </I>Change the 'W' to 190 and 'H' to 130 and press the [Apply] button. Feel free to play with the panel and its content, but don't forget to return here to take the rest of the tour.<P><B>[Comp]</B> - <I>component view</I><BR>This button is present <I>only</I> when a <I>container</I> gadget is being inspected. This view lists the components the container gadget with their generator procedure and visual reference. You may inspect each reference - with middle mouse click, but you can not change them. Inspect some of them, but before you continue, make sure you're back in this view (back button).<P><IMG ALT="Cool Oberon Object " SRC="images/Columbus14.gif" OBJECT="ColumbusObjs.24"> - <I>call Watson</I><BR>Columbus gives you the opportunity to see additional descriptions of the inspected object. These are tutorials, definition files or module files. This button calls <A HREF="Watson.html#SHOWDEF">Watson.ShowObj</A> with the object's generator name as parameter. Click on the button and the text 'Panels.Def' (or 'Panels.Mod' if exists) opens.<P><B>[Lib]</B> - <I>library view</I><BR>This button is present <I>only</I> when the object inspected is bound to a <I>public</I> or a <I>private</I> library. Obviously enough, when a library is inspected, the library view is the preferred view which is always presented first. The views lists the objects contained in the library. The generator procedure, the reference number, and in the case of a public library, the name in the index are displayed for each object, together with a visual reference (see component view above). Use the reference to inspect a particular object in the library. The name of the inspected public library is displayed in the top right corner. In the case of a private library, the text is simply "(Private)". The object which was being inspected when the library view was called is easily spotted: look for the blue text line. If there is no current object, no line is highlighted.<P><I>Try this: </I><CALL CMD="Columbus.Inspect Watson"><FONT COLOR=FF0000>Columbus.Inspect Watson</FONT></CALL><I> - the library view is presented immediately. Now, inspect the "ModFile" text field (</I><B>Ref # 4</B><I>) and then access the library view again (not by clicking the </I><B>[ &lt;= ]</B><I> button!)</I>.<P><B>[Editor]</B> - <I>library editor</I><BR>This button is present <I>only</I> when the object inpected is bound to a <I>public</I> library. The library editor more or less the same as the library panel, described in the next section. With it you can remove a library from memory, store a library on disk, retrieve objects, free objects or install objects in a library.<P>You reached the end of this tour. Close all panels and text, you opened during this course and step to the next section about the library panel.<P><HR><H1><A NAME="6"></A>Using the Library Inspector</H1>The library panel is opened with the command <CALL CMD="Desktops.OpenDoc Libraries2.Panel ~"><FONT COLOR=FF0000>Desktops.OpenDoc Libraries2.Panel ~</FONT></CALL><P>The panel is divided into three parts. The top part contains the button <B>[Directory]</B>, two check boxes and a list. The list shows the library names. You can choose the kind of libraries you want to see. To view the list of libraries stored on disk, select "Disk". To view the list of libraries currently loaded in memory, select "Memory". Click on the button <B>[Directory]</B> to see the list of your choice.<P>Select a library in the list with a click. The text field <B>Library</B> is updated: it shows the library which will become the target of the library management operations controlled by the buttons in the middle part.<BR><UL><BR><LI><B>[Unload]</B> - Removes the library from memory.<LI><B>[Store]</B> - Stores the library on disk (the library remains cached in memory).<LI><B>[Cleanup]</B> - Collects the unused objects and stores the library on disk.</UL><BR>At the same time, the list of objects contained in the library is displayed. Each object can be inspected by clicking its visual reference at the right side.<P>Select an object in the list with a click on its <B>Name</B> button. The text field <B>Object</B> is updated: it shows the object which will become the target of the operations controlled by the buttons in the bottom part.<BR><UL><BR><LI><B>[Retrieve]</B> - Inserts the object at the caret or opens it as a document (if it is a document gadget). The three check boxes at the right indicate if retrieval from the library should involve no, a deep or shallow copy (deep copies are default).<LI><B>[Rename]</B> - Renames the object with the specified name. All changes made to the object will be reflected immediately to the clients of the object. The text field on the right is used to specify the new name.<LI><B>[Install]</B> - Inserts the object under the specified name in the library. An object with this name is overwritten. The text field on the right is used to specify the name. The empty reference gadget is used to specify the object to install.<LI><B>[Free]</B> - Frees the selected object from the library.</UL><BR><HR><H1><A NAME="7"></A>Columbus commands</H1><H2><A NAME="INSPECT"></A>Inspection command - Columbus.Inspect</H2>The <B>Columbus.Inspect</B> command can take different forms, but in every case it opens a panel document named "Objects.Panel".<P><B>Columbus.Inspect ~</B> (without parameter!) attempts to locate a marked (*) or a selected (the most recently selected one) <I>visual</I> gadget, or also the object cited in the most recent selection. The latter case, which takes precedence over the others, is described below. If successful, the <I>attribute</I> view of the gadget is presented. Otherwise, a minimal panel is opened. The star-shaped (*) mark allows a finer grain selection of an object. As you may suspect, this command is hidden in the <I>Cmd</I> attribute of the [Inspect] button.<P><I>To see the difference, try inspecting the caption </I>"obj1"<I> </I><IMG ALT="Cool Oberon Object " SRC="images/Columbus15.gif" OBJECT="ColumbusObjs.25"> in the two ways. If you select the panel, you have to access the components view and to click on the TextsFields.NewCaption reference to reach the same view as you would by setting a mark.</I><P><B>Columbus.Inspect LibName [.ObjName] | [^] ~</B> presents inspection information on the named public library or on the object in a public library, according to the following rules:<BR><UL><BR><LI>If the name in the parameter represents a library, e.g. Watson, the "Objects.Panel" panel contains the <I>library</I> view enumerating all the objects in the library.<LI>If the qualified name in the parameter represents an object in a library, e.g. Watson.Order, the <I>attribute</I> view of the object is presented.<LI>If the object cannot be found in the library, e.g. Watson.Disorder, an enumeration of all the objects in the library is also presented.<LI>Finally, if the first name part is not that of a library (library cannot be found), e.g. What.Order or NotaLib, a minimal <I>library</I> view is presented (empty library).</UL><I><BR>Try out all the examples with: </I><CALL CMD="Columbus.Inspect ^"><FONT COLOR=FF0000>Columbus.Inspect ^</FONT></CALL><P><H2><A NAME="INSPECTLINK"></A>Link inspection command - Columbus.InspectLink</H2><B>Columbus.InspectLink LinkName</B> opens a panel document named "Objects.Panel". The object to inspect is taken from the executor gadget's link "LinkName". If the link does not exists or no object is present, a minimal 'Objects.Panel' document is opened. (This command can be used as Cmd or ConsumeCmd of a RefGadget.)<P><H2><A NAME="SHOWOBJS"></A>Showing the objects in a library - Columbus.ShowObjs</H2><B>Columbus.ShowObjs LibName</B> opens a text document "Columbus.ShowObjs" listing the objects exported by the named library. The name must have a ".Lib" extension. The information provided is a subet of and is more rudimentary than that obtained with <B>Columbus.Inspect LibName</B> .<P><I>Try this:</I> <CALL CMD="Columbus.ShowObjs Watson.Lib"><FONT COLOR=FF0000>Columbus.ShowObjs Watson.Lib</FONT></CALL> and compare with what was obtained earlier.<P><H2><A NAME="GETOBJ"></A>Retrieving an object from a library - Columbus.GetObj</H2><B>Columbus.GetObj LibName.ObjName</B> retrieves an object "ObjName" from the library "LibName.Lib". If the object is a document gadget, a copy of the document is opened on the display. A gadget frame will be inserted at the carret position. A copy is made depending on the value of an object named "copy style". If this object cannot be found in the current context, the copy style is assumed to be deep. A model is set to all selected frames as "Model"-link. (No copies are made for models).<P><H2><A NAME="FREEOBJ"></A>Removing an object from a library - Columbus.FreeObj</H2><B>Columbus.FreeObj LibName.ObjName</B> removes the object "ObjName" from the library "LibName.Lib". Objects contained by the freed object are not removed (see Columbus.CleanupLib).<P><H2><A NAME="ADDOBJ"></A>Adding an object to a library - Columbus.AddObj</H2><B>Columbus.AddObj LibName.ObjName</B> inserts a new object named "ObjName" into the library "LibName.Lib". If an object with that name already exists in the library, is replaced by the new object. The new object is taken from a visual reference named "value" in the current context.<P><H2><A NAME="RENAMEOBJ"></A>Renaming an object in a library - Columbus.RenameObj</H2><B>Columbus.RenameObj LibName.OldName NewName</B> replaces the name "OldName" in the index of the library "LibName.Lib" with "NewName".<P><H2><A NAME="8"></A>Commands to manage libraries</H2><BR><A NAME="SHOWLIBS"></A><B><BR>Columbus.ShowLibs [ObjName]</B> inserts the names of the libraries currently loaded in memory cache into the named list in the current context. If the list is not found, a text document "Columbus.ShowLibs" is opened instead. As an example, the button [Directory] in the "Libraries2.Panel" uses this command. This command is closely related to the command System.ShowLibraries, with the difference that font libraries are not listed.<BR><A NAME="STORELIB"></A><B><BR>Columbus.StoreLib ({LibName} | ^)</B> stores the named libraries on disk in the current directory. The names must have a ".Lib" extension.<BR><A NAME="UNLOADLIB"></A><B><BR>Columbus.UnloadLib ({LibName} | ^)</B> removes the named libraries from memory. The names must have a ".Lib" extension.<BR><A NAME="CLEANUPLIB"></A><B><BR>Columbus.CleanupLib ({LibName} | ^)</B> frees unreferenced objects from the named libraries. A cleaned-up library is stored on disk and reloaded into memory. The names must have a ".Lib" extension.<BR><HR><BR>Revised, afi 16 Aug 1996<BR>Installed on 14 Feb 1997<HR></BODY></HTML>