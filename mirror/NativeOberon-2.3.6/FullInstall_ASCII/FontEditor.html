<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML Level 2.0 2//EN"><!-- Generated by Text2HTMLGIF (afi, ejz)--><HTML><HEAD><META NAME="Author" CONTENT="Andre Fischer"><TITLE>Font Editor User's Guide</TITLE></HEAD><BODY><H1><CENTER>Font Editor User's Guide</CENTER></H1><HR><CENTER><B>[ Text | <A HREF="FontEditor.Contents.html">Contents</A> | <A HREF="FontEditor.Index.html">Index</A> | <A HREF="Big.Index.html">Master index</A>]</B></CENTER><BR><BR><H1><A NAME="0"></A>Objective</H1>Learn how to create and modify fonts using the special purpose editor and the companion panel FontEditor. This simple and handy tool, is very useful to draw custom fonts. The font editor is an Oberon system extension using the facilities provided by the <A HREF="Rembrandt.html#">Rembrandt</A> tool.<P>Estimated time: 30 minutes.<P><HR><H1><A NAME="1"></A>Installation</H1>The FontEditor is delivered with Oberon for Windows as an <A HREF="Compress.html#">archived application</A> which must be installed first. Verify with <CALL CMD="System.Directory Win.FontTools* ~"><FONT COLOR=FF0000>System.Directory Win.FontTools* ~</FONT></CALL><P><HR><H1><A NAME="2"></A>Using the FontEditor panel</H1><A NAME="3"></A>A <I>type-font</I> (or <I>font</I>, in short) is a collection of screen or printer characters sharing a common <I>typeface</I>. Oberon is essentially using a custom designed font family, named "Syntax" created by Mr. H. Meier. This family consists of several collections of varying size (8, 10 12, 14, 16, 20 and 24 points) and style (normal, italic, medium bold and bold). 1 point = 1/72 inch<P>The Oberon system is also distributed with another font family named "Math" in the sizes 10, 12, 14, 16, 20 and 24 points of the normal style.<P>Open the FontEditor panel by executing the command:<P>&nbsp; &nbsp; &nbsp; &nbsp; Desktops.OpenDoc FontEditor.Panel<P>The top part of the panel presents a table of 256 buttons, one for each of the 256 8-bit combinations. Buttons are captioned with the corresponding displayable (or printable) character where applicable, and with the corresponding hexadecimal value otherwise. Note that only the buttons 00 to 7F are the standardized ASCII codes. The assignment of the buttons 80 to 96 (special language characters) is a property of Oberon.<P>Enter the name of one of the Oberon fonts, such as "Syntax12.Scn.Fnt", in the text field gadget below the table and (middle) click on the [<A HREF="#load">Load</A>] button.<BR><A NAME="4"></A><BR>Move the mouse focus onto one of the buttons of the table, and press the middle mouse key to select the corresponding character, which then appears in original size in the white area at the lower right of the panel. Drag on that key and watch how the various characters are previewed in the white area. Release the key when the mouse focus is positioned on the character to edit. A picture viewer is opened to <A HREF="#edit">edit</A> the character.<P>The buttons in the lower part of the panel have the following meaning:<P><A NAME="load"></A><B>[Load]</B> loads the font specified in the text field above the button. This font replaces the current one, if one is loaded, and it can now be inspected and modified.<P><B>[Store]</B> stores the current font in the file named in the text field above the button. Font file names (must) have the following name suffixes:<BR>- .Scn.Fnt for display (Sreen) fonts<BR>- .Pr3.Fnt for printer fonts (applies to DOS Oberon only)<P><B>[Store Char *]</B> stores the character appearing in the marked viewer in the current font. The viewer's nameplate must contain the character itself or its hexadecimal value for a displayable character. For a non-displayable character it must be its hexadecimal value.<BR><A NAME="5"></A><B><BR>[Show String]</B> opens an unnamed picture viewer displaying the string entered previously in the text field at the right. It is a preview which may be zoomed and to some extent edited (select, move and copy), but changes cannot be saved. This is useful for verifying the modifications to the currently loaded font.<P><B>New Viewer:</B> When this check box is checked, the result of any of the three operations described below is presented in a new picture viewer. If it is not, the result appears in the current viewer.<BR><A NAME="6"></A><B><BR>[Flip H]</B> flips the <A HREF="#select">selection</A> around the median line.<BR><A NAME="7"></A><B><BR>[Flip V]</B> flips the <A HREF="#select">selection</A> around the median line.<BR><A NAME="8"></A><B><BR>[Turn 90]</B> rotates the <A HREF="#select">selection</A> anticlockwise by 90 degrees.<P><HR><H1><A NAME="edit"></A>Using the editor</H1>Using the FontEditor panel, you have learned how to start editing a character by clicking on one of the buttons in the font table. The character picture is presented in a picture viewer having properties very similar to the picture viewer described in the <A HREF="Rembrandt.html#">Rembrandt</A> tutorial.<BR><A NAME="9"></A><BR>The character appears magnified at its <I>maximum</I>, in a white area with a <I>grid</I>. This area does not necessarily cover the entire viewer. Every square corresponds to one pixel in real size. The mouse focus, or cursor, is a cross formed by intersecting horizontal and vertical line segments. It appears as soon as the mouse focus crosses the boundary of the picture. Pressing the left mouse key lets the caret appear, a cross rotated by 45 degrees, which <I>snaps</I> on the grid and marks the insertion point. Dragging on the key, tracks the caret. The caret can also be set by clicking the left key.<P><H2><A NAME="10"></A>Character metrics</H2>&nbsp; &nbsp; &nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/FontEditor1.gif" OBJECT="FontEditorObjs.0"><P><A NAME="11"></A><A NAME="12"></A><BR>The <I>imaging model</I> of characters defines that a character is contained in a box defined by a set of metric data x, y, w, h and dx, in a system of coordinates represented by the two red orthogonal lines. The origin of the coordinates is called the <I>reference point</I> and the X-axis is called the <I>base line</I>. (x, y) is a vector from the current reference point to the origin of the box. w and h are the width and the height of the box, and dx is the distance to the reference point of the next character on the same base line, that is the abscissa of the blue line.<P>The metrics of a character can be retrieved by program, as is shown below:<P>&nbsp; &nbsp; PROCEDURE ShowC*;<BR>&nbsp; &nbsp; &nbsp; &nbsp; VAR<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dx, x, y, w, h: INTEGER;<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pat: LONGINT;<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch: CHAR;<BR>&nbsp; &nbsp; BEGIN<BR>&nbsp; &nbsp; &nbsp; &nbsp; <B>ch := "g";</B><BR>&nbsp; &nbsp; &nbsp; &nbsp; <B>Fonts.GetChar (Fonts.This("Syntax12.Scn.Fnt"),</B><BR>&nbsp; &nbsp; &nbsp; &nbsp; <B>ch, dx, x, y, w, h, pat);</B><BR>&nbsp; &nbsp; &nbsp; &nbsp; Out.Int(x, 3), ....<BR>&nbsp; &nbsp; &nbsp; &nbsp; (* Visualizing the values produces,<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for the example letter in the example font,<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x = 1, y = -3, w = 5, h = 10 and dx = 6 *)<BR>&nbsp; &nbsp; END ShowC;<P><H2><A NAME="13"></A>Font metrics</H2>The abstract data type <I>Font</I>, defined in the <CALL CMD="Watson.ShowObj Fonts.Font"><FONT COLOR=FF0000>Fonts</FONT></CALL> module, represents a collection of characters. The font attributes are:<P>Fonts.height: the minimum distance between lines. This distance is modified when the Vertical offset is modified.<P>Fonts.minX, Fonts.maxX, Fonts.minY, Fonts.maxY: are the extremal values of the box enclosing all characters when their base points are aligned at (0, 0).<P>The metrics of a font can be retrieved by program, as is shown below:<P>&nbsp; &nbsp; PROCEDURE ShowF*;<BR>&nbsp; &nbsp; &nbsp; &nbsp; VAR<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; F: Fonts.Font;<BR>&nbsp; &nbsp; BEGIN<BR>&nbsp; &nbsp; &nbsp; &nbsp; <B>F := Fonts.This("Syntax12.Scn.Fnt");</B><BR>&nbsp; &nbsp; &nbsp; &nbsp; Out.Int(F.height, 3); ...<BR>&nbsp; &nbsp; &nbsp; &nbsp; (* Visualizing the values produces, for the example font,<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; F.height = 14, F.minX = 0, F.maxX = 13,<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; F.minY = -4 and F.maxY = 10 *)<BR>&nbsp; &nbsp; END ShowF;<P><H2><A NAME="14"></A>Vertical offset</H2>When text is edited, characters normally have their base line aligned. Characters may hovewer be offset by a few points above or below the base line of the neighbouring characters to let them appear as superscript or subscript characters for instance. Example: sin2 x + cos2 x = 1. or aij<P>This is obtained by using the TextDocs.ChangeOffset command. In that case the distance to the neighbouring lines is not equal to Fonts.height anymore, but is increased.<P><H2><A NAME="15"></A>Zooming a picture</H2>In addition to the standard buttons, the title bar features two extra buttons used for zooming.<BR><A NAME="16"></A><B><BR>[+]</B> magnifies the <A HREF="#select">selection</A>, or the entire picture if there is none. The button may be clicked 5 times in succession to obtain a magnification of 16. This makes it very easy to edit a character picture dot-wise.<P><B>[-]</B> reduces the size of the character picture. The button may be clicked a maximun of 5 times in succession until the original size is restored, and <I>not</I> beyond.<P><H2><A NAME="17"></A>Editing with the mouse</H2>Editing of a character is essentially done with middle mouse key clicks. However, the system behaviour differs depending on which of the two modi "Pixel" or "Metric" has been selected. These two buttons are radio buttons.<P><B>[Pixel]</B> When Pixel is selected, position the mouse focus on a square of the grid. If the square is white, it changes to black when the middle mouse key is clicked. If it is black, it changes to white. Instead of editing the pattern dot-wise, you may drag on the middle key to process all the dots on a trajectory. If you started on a black square, it and all further dots are changed to white, and conversely. Changes are immediately reflected in the small white area in the panel.<P><B>Useful hint:</B> to ease character retouching, make a copy of the viewer first, then magnify either of the two views as required. Whatever is retouched in the zoomed picture will be reflected in the original.<P><B>[Metric]</B> When Metric is selected, the colored metric lines can be moved. Position the mouse cursor at the proximity of the line to move, press the middle mouse key, and drag on it in the direction of the line until the line is "captured". From that moment, a vertical line can be moved sideways, or the horizontal line up and down, in discrete intervals of the snapping grid. Release the key when the line is correctly positioned.<P>The mouse commands otherwise comply with the Oberon standard.<P>&nbsp; &nbsp; <IMG ALT="Cool Oberon Object " SRC="images/FontEditor2.gif" OBJECT="FontEditorObjs.13"><P><A NAME="select"></A><A NAME="18"></A><B>Selection</B><P>Clicking the right mouse key (anywhere in the viewer) selects the <I>entire</I> picture. The cursor changes to a flat hand and the entire white area is surrounded by a fat frame. Clicking again, deselects the picture and restores the cursor.<P>Pressing the key and dragging on it, tracks the <I>selection</I> which is delimited by a rubber band rectangle. When the key is released, a fat selection frame is drawn. When copying a selection, the caret may be set in a picture viewer different from the viewer containing the selection.<P><A NAME="19"></A><B>Moving a picture</B><P>Moving the white area in the viewer can be done in two ways. First, select the entire area with a right mouse click, then press the middle mouse key and drag. Second, if the area does <I>not</I> cover the viewer entirely, place the mouse focus outside the area, press the middle mouse key (the cursor changes to a flat hand), and drag. In both cases, when the white area is correctly positioned, release the key.<P>When editing is completed, close the picture viewer(s) and store the character in the current font.<P><H2><A NAME="20"></A>Printing the character picture</H2><BR>To print a character picture, mark it and either:<BR>- click the [Print *] button in the Rembrandt panel or<BR>- execute the command: Desktops.PrintDoc printDevice * ~<HR><H1><A NAME="21"></A>Using the Windows Font resource tool</H1><BR>If you are using Oberon for Windows, and have created or modified a font with the font editor, you can improve the performance of your display system by compiling Windows font resources from the Oberon raster font. Note that this applies to the Oberon Syntax and Math display font families <I>only</I>, and to custom fonts developed using this FontEditor tool. Oberon for Windows uses Windows fonts for printing.Besides these font families, Oberon for Windows may also use installed True Type fonts - see <CALL CMD="Desktops.OpenDoc UserGuide.Text"><FONT COLOR=FF0000>UserGuide.Text</FONT></CALL> .<P>The conversion is performed using the sole command in the FontRes module.<BR><A NAME="22"></A><B><BR>FontRes.Convert { OberonFontFile => [Path]WindowsFontFile} ~ | ^</B> processes a list of name pairs, separated by "=>". The Oberon display font file <I>oberonFontFile</I> is converted to a Windows FON resource. If the file already exists, it is overwritten. The name of a FON file consists of four parts: NNNNNSSF.FON where:<BR><UL><BR><LI>NNNNN first five letters of the font family name (e.g. Synta for Syntax, Math for Math)<LI>SS one or two digits for font size<LI>F optional character for face style (b = bold, i = italics, m = medium)<LI>FON standard name extension</UL><BR><CALL CMD="Desktops.OpenDoc FontRes.Tool"><FONT COLOR=FF0000>FontRes.Tool</FONT></CALL> contains all that is necessary to convert the entire Syntax font family, and this text can be modified for converting other fonts.<BR><A NAME="23"></A><BR>The self-extracting FONTS.EXE file distributed with Oberon for Windows contains the Syntax and the Math font families and the already converted Windows resources for the Syntax font family. After installation, these fonts are stored in a separate subdirectory FONTS.<P><B>Note:</B> The Windows .FNT file format used to produce the resource is documented in the Microsoft Windows Programmer's Reference, Vol. 4, Chapter 4: Font File Format.<BR><HR><BR>Revised 11 Dec 1996<BR>Installed on 14 Feb 1997<HR></BODY></HTML>